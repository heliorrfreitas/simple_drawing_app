<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

</head>
<style>

body{
    background-color: #333333;
}

div{
    color: white;
}

.button {
  border: none;
  color: white;
  padding: 20px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  cursor: pointer;
  border-radius: 50%;
}

.button-selected {
    border: solid;
    border-color: white;}
.button1 {background-color: black;}
.button2 {background-color: green;}
.button3 {background-color: blue;}
.button4 {background-color: yellow;}
.button5 {background-color: red;}
.button6 {background-color: pink;}
.button7 {background-color: orange;}
.button8 {background-color: purple;}
.button9 {background-color: brown;}
.button10 {background-color: gray;}


</style>
<body>
<canvas id="panelCanvas" width="800" height="560"></canvas>

<div>
Choose Pencil Color
<button id="black" class="button button1 button-selected" onclick="selectColor('black', this.id);"></button>
<button id="green" class="button button2" onclick="selectColor('green', this.id);"></button>
<button id="blue" class="button button3" onclick="selectColor('blue', this.id);"></button>
<button id="yellow" class="button button4" onclick="selectColor('yellow', this.id);"></button>
<button id="red" class="button button5" onclick="selectColor('red', this.id);"></button>
<button id="pink" class="button button6" onclick="selectColor('pink', this.id);"></button>
<button id="orange" class="button button7" onclick="selectColor('orange', this.id);"></button>
<button id="purple" class="button button8" onclick="selectColor('purple', this.id);"></button>
<button id="brown" class="button button9" onclick="selectColor('brown', this.id);"></button>
<button id="gray" class="button button10" onclick="selectColor('gray', this.id);"></button>
</div>
<div><button id="clear" onclick="drawEmptyPanel()">Clear Panel</button></div>

</body>
<script>

let isDrawing = false;
let x = 0;
let y = 0;
let pencilColor = "black";
let previousSelectedButtonId = "black";

const buttonSelectedClass = "button-selected";
const canvas = document.getElementById('panelCanvas');
const context = canvas.getContext('2d');
const rect = canvas.getBoundingClientRect();

drawEmptyPanel();

// Add the event listeners for mousedown, mousemove, and mouseup
canvas.addEventListener('mousedown', e => {
  x = e.clientX - rect.left;
  y = e.clientY - rect.top;
  isDrawing = true;
});

canvas.addEventListener('mousemove', e => {
  if (isDrawing === true) {
    drawLine(context, x, y, e.clientX - rect.left, e.clientY - rect.top);
    x = e.clientX - rect.left;
    y = e.clientY - rect.top;
  }
});

window.addEventListener('mouseup', e => {
  if (isDrawing === true) {
    drawLine(context, x, y, e.clientX - rect.left, e.clientY - rect.top);
    x = 0;
    y = 0;
    isDrawing = false;
  }
});

function drawEmptyPanel(){
    context.beginPath();
    context.clearRect(0, 0, canvas.width, canvas.height);
    context.fillStyle = '#FFFFFF';
    context.fillRect(0, 0, canvas.width, canvas.height);
    context.closePath();
}

function drawLine(context, x1, y1, x2, y2) {
  context.beginPath();
  context.strokeStyle = pencilColor;
  context.lineWidth = 1;
  context.moveTo(x1, y1);
  context.lineTo(x2, y2);
  context.stroke();
  context.closePath();
}

function selectColor(color, buttonId){
    pencilColor = color;
    unselectPreviousColor();
    selectCurrentColor(buttonId);
}

function unselectPreviousColor(){
    let previousSelectedButton = document.getElementById(previousSelectedButtonId);
    previousSelectedButton.classList.remove(buttonSelectedClass)
}

function selectCurrentColor(buttonId){
    let button = document.getElementById(buttonId);
    button.className += " " +buttonSelectedClass;
    previousSelectedButtonId = buttonId;
}

</script>

</html>
